# Rime schema settings
# encoding: utf-8

schema:
  schema_id: liuli42
  name: å››äºŒé¡¶Â·ç‰ç’ƒ
  version: beta
  author:
    - è’
  description: |
    ğŸ’ç‰ç’ƒÂ·å››äºŒé¡¶ï¼Œæç®€å­—é›†
  dependencies:
    - liuli.moran

switches:
  - name: popping_method
    states: [ å››äºŒ, äº”äºŒ ]
  - name: embeded_cands
    states: [ â˜åµŒå…¥, â˜‘åµŒå…¥ ]
    reset: 0
  - name: ascii_mode
    reset: 0
    states: [ä¸­, è‹±]
  - name: full_shape
    reset: 0
    states: [åŠ, å…¨]
  - name: zh_s2t
    reset: 0
    states: [ç®€, ç¹]

engine:
  processors:
    - ascii_composer
    - lua_processor@*lutai.key_binder
    - key_binder
    - lua_processor@*liuli.popping
    - recognizer
    - lua_processor@*c42.encoder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@extra
    - affix_segmentor@wildcard
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator
    - script_translator@moran
    - history_translator
    - lua_translator@*liuli.stats_2
  filters:
    - lua_filter@*c42.assist
    - simplifier@zh_s2t
    - reverse_lookup_filter@reverse_lookup
    - lua_filter@*c42.predictor
    - lua_filter@*liuli.embeded_cands@embeded_cands
    - lua_filter@*c42.select_comment
    - lua_filter@*c42.assembly
    - uniquifier

speller:
  alphabet: "abcdefghjiklmnopqrstuvwxyz;'"
  initials: "abcdefghijklmnopqrstuvwxyz;'"
  auto_select: true
  auto_select_pattern: ^;\w+$
  algebra:
    - xform/\d$/$1/
    - xform/([a-z][a-z][a-z][a-z])/'$1/
  popping:
    - when_not: popping_method
      match: "[a-z][a-z][a-z]"
      accept: "[a-z]"
      prefix: 2
    - when: popping_method
      match: "[a-z][a-z][a-z][a-z]"
      accept: "[a-z]"
      prefix: 2

translator:
  dictionary: liuli42
  enable_sentence: false
  enable_user_dict: false
  enable_completion: false
  enable_encoder: false

extra:
  tag: extra
  prefix: "`"
  tips: "ã€”åæŸ¥ã€•"

moran:
  tag: extra
  dictionary: liuli.moran
  enable_user_dict: false
  initial_quality: 1

reverse_lookup:
  dictionary: liuli42
  overwrite_comment: true
  comment_format:
    - "xform/~//"
    - xform/\d//
  tags: [extra]

history:
  tag: history
  input: "z"
  size: 3
  initial_quality: -1

zh_s2t:
  opencc_config: s2t.json
  option_name: zh_s2t

# åµŒå…¥å€™é¸çš„é¡¯ç¤ºé…ç½®
# é»˜èªé¡¯ç¤ºæ•ˆæœçˆ²:
# ğŸ’ ç‰ Â»ç’ƒÂ« [kmt] ~ç¯±Â² ~ç±“Â³
embeded_cands:
  index_indicators: [ Â¹, Â², Â³, â´, âµ, â¶, â·, â¸, â¹, â° ]       # åµŒå…¥å€™é¸çš„åºè™Ÿé¡¯ç¤ºæ ¼å¼
  first_format: "${Stash}[${å€™é¸}${Seq}]${Code}${Comment}" # é¦–é¸çš„æ¸²æŸ“æ ¼å¼
  next_format: "${Stash}${å€™é¸}${Seq}${Comment}"           # éé¦–é¸çš„æ¸²æŸ“æ ¼å¼
  separator: " "                                           # å€™é¸ä¹‹é–“çš„åˆ†éš”ç¬¦
  stash_placeholder: "~"                                   # éé¦–é¸çš„å»¶é²ä¸²å ä½ç¬¦, æ”¯æŒ ${Stash} è®Šé‡

punctuator:
  import_preset: symbols
  half_shape:
    __append:
      '\': 'ã€'

key_binder:
  #  import_preset: default
  bindings:
    - match: "^[qwertyuiopasdfghjklzxcvbnm]{1}$"
      accept: "/"
      send_sequence: "{space}"
    - match: "^[qwertyuiopasdfghjklzxcvbnm]{3}$"
      accept: "/"
      send_sequence: "{Home}{Right}{Right}{space}{space}"
    - match: "^[qwertyuiopasdfghjklzxcvbnm]{1}$"
      accept: "Tab"
      send_sequence: "2"
    - match: "^[qwertyuiopasdfghjklzxcvbnm]{3}$"
      accept: "Tab"
      send_sequence: "{Home}{Right}{Right}{space}2"
    - { when: has_menu, accept: space, send: space }                          # æœ‰å€™é€‰æ—¶ç©ºæ ¼é€‰ä¸­
    - { when: composing, accept: space, send: Escape }                        # æ— å€™é€‰(ç©ºç ï¼‰æ—¶ç©ºæ ¼æ¸…å±ç¼–ç 
    - { when: paging, accept: minus, send: Page_Up }                          # â€» å‡å·ç¿»äˆç”¨
    - { when: has_menu, accept: equal, send: Page_Down }                      # â€» ç­‰å·ç¿»äˆç”¨
    - { when: has_menu, accept: semicolon, send: KP_2 }
    - { when: has_menu, accept: apostrophe, send: KP_3 }
    - { when: has_menu, accept: 9, send: KP_2 }
    - { when: has_menu, accept: 8, send: KP_3 }
    - { when: has_menu, accept: 7, send: KP_4 }
    - { when: has_menu, accept: 6, send: KP_5 }

recognizer:
  patterns:
    punct: "^/([0-9]0?|[A-Za-z]+)$"
    history: '^z$'
    extra: '^`[a-z]*$'
